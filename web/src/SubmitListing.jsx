import { useState } from 'react';
import { API } from './lib/api';
export default function SubmitListing(){const[form,setForm]=useState({type:'accommodation',title:'',location:'',priceZMW:''});const[adminKey,setAdminKey]=useState('');const submit=async(e)=>{e.preventDefault();try{if(!adminKey)return alert('Enter ADMIN_API_KEY.');const payload={...form,priceZMW:Number(form.priceZMW||0)};const r=await API.submitListing(payload,adminKey);alert('Listing saved (id '+r.item.id+').');window.location.hash='#/';}catch(e){alert(e.message);}};return(<div style={{fontFamily:'system-ui, Arial',maxWidth:640,margin:'20px auto'}}><h2>Submit Listing</h2><form onSubmit={submit}><div><label>Type</label><br/><select value={form.type} onChange={e=>setForm(f=>({...f,type:e.target.value}))}><option value='accommodation'>Accommodation</option><option value='car_hire'>Car Hire</option><option value='land'>Land</option><option value='services'>Services</option></select></div><div><label>Title</label><br/><input value={form.title} onChange={e=>setForm(f=>({...f,title:e.target.value}))} required/></div><div><label>Location</label><br/><input value={form.location} onChange={e=>setForm(f=>({...f,location:e.target.value}))}/></div><div><label>Price (ZMW)</label><br/><input type='number' value={form.priceZMW} onChange={e=>setForm(f=>({...f,priceZMW:e.target.value}))}/></div><div><label>Admin API Key</label><br/><input value={adminKey} onChange={e=>setAdminKey(e.target.value)} placeholder='x-admin-key'/></div><div style={{marginTop:12}}><button type='submit'>Save</button><a href='#/' style={{marginLeft:8}}>Cancel</a></div></form></div>);}
